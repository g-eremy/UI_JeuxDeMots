<section *ngIf="search_service.getData() !== null">
	<article>
		<div *ngIf="search_service.getData().definition.length !== 0" class="accordion" id="accordion-definition">
			<div class="row">
					<div class="form-group col-lg-2">
						<button class="btn btn-primary col-lg-12" data-toggle="collapse" href="#definitions" role="button" aria-expanded="false">
							Définitions
						</button>
					</div>

					<div class="form-group col-lg-2">
						<button class="btn btn-secondary col-lg-12" data-toggle="collapse" href="#semantic-refinement" role="button" aria-expanded="false">
							Raffinements sémantiques
						</button>
					</div>
			</div>

			<div id="definitions" class="collapse animated-collapse mt-3 mb-4" data-parent="#accordion-definition">
				<table class="table table-striped table-bordered">
					<tbody>
						<tr *ngFor="let e of search_service.getData().definition">
							<td scope="row" class="text-justify text-break">{{e}}</td>
						</tr>
					</tbody>
				</table>
			</div>

			<div id="semantic-refinement" class="collapse animated-collapse mt-3 mb-4" data-parent="#accordion-definition">
				<app-semantic-refinement></app-semantic-refinement>
			</div>
		</div>
		<p *ngIf="search_service.getData().definition.length === 0">
			Il n'y a aucune définition pour ce terme
		</p>
	</article>

	<div class="border-top mb-3"></div>
	<section id="relations">
		<div *ngFor="let e of search_service.getData().relation_types" class="mb-5">
			<article id="rt_{{e.id}}" >
				<header>
					<h1 class="col-lg-9 bg-light border border-secondary rounded h3" ngbTooltip="{{e.help}}" placement="top-left">
						<a href="#relation_list_{{e.id}}" data-toggle="collapse" aria-expanded="false" class="collapsed-arrow text-dark p-3" (click)="arrowCollapse($event, e, search_service.getData().relation_types)">
							{{e.gpname}}
						</a>
					</h1>
				</header>

				<div class="collapse animated-collapse col-lg-9 p-0" id="relation_list_{{e.id}}" data-parent="#relations">
					<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th class="th_rt">
									<a href="javascript:void(0)" (click)="changeOrder('name', e)" class="text-dark">
										Nom
										<img src="/assets/svg_not_sort_arrow.svg" class="sorted_arrow" id="svg_name" alt="non trié">
									</a>
								</th>
								<th>
									<a href="javascript:void(0)" (click)="changeOrder('weight', e)" class="text-dark">
										Pertinence
										<img src="/assets/svg_sort_arrow.svg" class="sorted_arrow" id="svg_weight" alt="trié">
									</a>

								</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let n of e.associated_relations| sortBy:e.order:e.sorted_by">
								<td class="text-justify text-break p-0"><a href="{{ search_service.generateLink({term: n.name, submit: 'Rechercher'}) }}" class="block-link">{{n.name}}</a></td>
								<td class="">{{n.weight}}</td>
							</tr>
						</tbody>
					</table>

					<ngb-pagination
						*ngIf="e.nb_pages !== 1"
						(page)="1"
						pageSize="10"
						[maxSize]="3"
						[rotate]="true"
						[collectionSize]="e.count"
						[ellipses]="true"
						(pageChange)="loadPage($event, e)"
						class="d-flex justify-content-center"></ngb-pagination>
				</div>
			</article>
		</div>
	</section>
</section>
