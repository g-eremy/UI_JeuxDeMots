<section *ngIf="data !== null">
	<article>
		<div *ngIf="data.definition.length !== 0" class="accordion" id="accordion-definition">
			<div class="row">
					<div class="form-group col-lg-2">
						<button class="btn btn-primary col-lg-12" data-toggle="collapse" href="#definitions" role="button" aria-expanded="false">
							Définitions
						</button>
					</div>

					<div class="form-group col-lg-2">
						<button class="btn btn-secondary col-lg-12" data-toggle="collapse" href="#semantic-refinement" role="button" aria-expanded="false">
							Raffinements sémantiques
						</button>
					</div>
			</div>

			<div id="definitions" class="collapse animated-collapse mt-3 mb-4" data-parent="#accordion-definition">
				<table class="table table-striped table-bordered">
					<tbody>
						<tr *ngFor="let e of data.definition">
							<td scope="row" class="text-justify text-break">{{e}}</td>
						</tr>
					</tbody>
				</table>
			</div>

			<div id="semantic-refinement" class="collapse animated-collapse mt-3 mb-4" data-parent="#accordion-definition">
				<app-semantic-refinement></app-semantic-refinement>
			</div>
		</div>
		<p *ngIf="data.definition.length === 0">
			Il n'y a aucune définition pour ce terme
		</p>
	</article>

	<div class="border-top mb-3"></div>

	<section id="relations">
		<header class="form-group">
			<input
				type="button"
				id="button_rt_{{e.id}}"
				value="{{e.gpname}}"
				ngbTooltip="{{e.help}}"
				placement="top"
				class="btn btn-primary m-1 btn-lg"
				*ngFor="let e of data.relation_types | sortBy:'asc':'gpname'"
				(click)="showRelations(e)">
		</header>

		<div class="border-top my-3"></div>

		<div class="position-relative p-0 m-0">
			<article
				#relation_types_view
				id="content_rt_{{e.id}}"
				class="d-none position-absolute row justify-content-center p-0 m-0 w-100"
				*ngFor="let e of data.relation_types">
				
				<div class="col-lg-9">
					<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th class="th_relation_type th_relation_type_name">
									<a href="javascript:void(0)" (click)="changeOrder('name', e)" class="text-dark">
										Nom
										<img src="/assets/svg_not_sort_arrow.svg" class="not_sorted_arrow" id="svg_name_{{e.id}}" alt="non trié">
									</a>
								</th>
								<th class="th_relation_type">
									<a href="javascript:void(0)" (click)="changeOrder('weight', e)" class="text-dark">
										Pertinence
										<img src="/assets/svg_sort_arrow.svg" class="sorted_arrow" id="svg_weight_{{e.id}}" alt="trié">
									</a>

								</th>
							</tr>
						</thead>
						<tbody>
							<tr [ngClass]="{'table-warning': n.weight < 0}" *ngFor="let n of e.associated_relations | sortBy:e.order:e.sorted_by">
								<td class="text-justify text-break p-0"><a href="{{ search_service.generateLink({term: n.name, submit: 'Rechercher'}) }}" class="block-link">{{n.name}}</a></td>
								<td class="">{{n.weight}}</td>
							</tr>
						</tbody>
					</table>

					<ngb-pagination
						*ngIf="e.nb_pages !== 1"
						(page)="1"
						[pageSize]="e.nb_term"
						[maxSize]="3"
						[rotate]="true"
						[collectionSize]="e.count"
						[ellipses]="true"
						(pageChange)="loadPage($event, e)"
						class="d-flex justify-content-center"></ngb-pagination>
				</div>
			</article>
		</div>
	</section>
	<div id="trest"></div>
</section>
